name: Notify Discord

on:
  push:        # theo d√µi m·ªçi nh√°nh khi c√≥ commit/push
  pull_request:  # theo d√µi m·ªçi nh√°nh khi c√≥ PR
    types: [opened, closed, reopened, synchronize]

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send Discord notification
        uses: Ilshidur/action-discord@master
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
        with:
          args: |
            {
              "username": "GitHub Bot ü§ñ",
              "embeds": [
                {
                  "title": "üîî New Event in ${{ github.repository }}",
                  "description": "Branch: **${{ github.ref_name }}**",
                  "color": 5814783,
                  "fields": [
                    {
                      "name": "üë§ Author",
                      "value": "${{ github.actor }}",
                      "inline": true
                    },
                    {
                      "name": "üìù Commit Message",
                      "value": "${{ github.event.head_commit.message }}",
                      "inline": false
                    },
                    {
                      "name": "üîó Commit URL",
                      "value": "[View Commit](${{ github.event.head_commit.url }})",
                      "inline": false
                    }
                  ],
                  "footer": {
                    "text": "GitHub Actions ‚Ä¢ ${{ github.event_name }}"
                  },
                  "timestamp": "${{ github.event.head_commit.timestamp }}"
                }
              ]
            }


# This workflow sends a notification to a Discord channel whenever there is a push or pull request event in the repository.